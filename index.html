<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STYLYキャンペーンサンプル</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        .section-title {
            margin-top: 30px;
            margin-bottom: 10px;
            font-size: 20px;
            color: #34495e;
        }

        .button {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #2980b9;
        }

        .button.secondary {
            background-color: #95a5a6;
        }

        .button.secondary:hover {
            background-color: #7f8c8d;
        }

        .info-box {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .status {
            margin-top: 20px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>STYLYキャンペーンページ</h1>

        <h2 class="section-title">カテゴリ：ARシーン</h2>
        <button class="button" onclick="playStylyScene('a13ca1d3-fc78-4838-8bb9-1859eb75cb76', '認証・一括DL')">認証・一括DL</button>
        <button class="button" onclick="playStylyScene('c2972b35-e2a3-4105-861c-c6bd80946b83', 'AR1話（4人）')">AR1話（4人）</button>
        <button class="button" onclick="playStylyScene('df7bc80a-f50d-4301-8ba4-d441d5d06d7f', 'AR2話（まひる・キウイ）')">AR2話（まひる・キウイ）</button>
        <button class="button" onclick="playStylyScene('2aafb13d-9bcd-4456-b0a7-2fdfac229952', 'AR3話（花音・めい）')">AR3話（花音・めい）</button>
        <button class="button" onclick="playStylyScene('649155b9-9d5a-44be-9d69-5084ae3f5f0b', 'AR4話（花音・まひる）')">AR4話（花音・まひる）</button>
        <button class="button" onclick="playStylyScene('ce1bb10c-06ce-4637-ac31-1907e6763278', 'AR5話（ライブ）')">AR5話（ライブ）</button>
        <button class="button" onclick="playStylyScene('ddaefbbd-4f0e-4065-958c-5b84f3facaa6', '有料版撮影シーン')">有料版撮影シーン</button>
        <button class="button" onclick="playStylyScene('3d20da61-e57c-4013-9ee0-31aa1777620e', '無料版撮影シーン')">無料版撮影シーン</button>

        <h2 class="section-title">カテゴリ：音声</h2>
        <button class="button secondary" onclick="playAudio('Voice/250925_ヨルクラ_AR体験_ScapeStory_#1_音声コンテンツ01_プロローグ_MIX.wav', '音声コンテンツ01 プロローグ')">音声コンテンツ01 プロローグ</button>
        <button class="button secondary" onclick="playAudio('Voice/250925_ヨルクラ_AR体験_ScapeStory_#3_音声コンテンツ02_MIX.wav', '音声コンテンツ02')">音声コンテンツ02</button>
        <button class="button secondary" onclick="playAudio('Voice/250925_ヨルクラ_AR体験_ScapeStory_#4_音声コンテンツ03_MIX.wav', '音声コンテンツ03')">音声コンテンツ03</button>
        <button class="button secondary" onclick="playAudio('Voice/250925_ヨルクラ_AR体験_ScapeStory_#6_音声コンテンツ04_MIX.wav', '音声コンテンツ04')">音声コンテンツ04</button>
        <button class="button secondary" onclick="playAudio('Voice/250925_ヨルクラ_AR体験_ScapeStory_#7音声コンテンツ_05_MIX.wav', '音声コンテンツ05')">音声コンテンツ05</button>

        <div id="status" class="status"></div>
        <audio id="audioPlayer" preload="auto"></audio>
    </div>

    <script type="application/javascript" src="./v0.0.6.js"></script>
    <script>
        // ステータス表示関数
        function showStatus(message) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.style.display = 'block';
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 3000);
        }

        // STYLYシーンを再生
        function playStylyScene(sceneId, label) {
            if (sceneId && window.StylyMobilePartnerLibrary && window.StylyMobilePartnerLibrary.scene) {
                window.StylyMobilePartnerLibrary.scene.play(sceneId);
                showStatus(`${label} を再生します`);
            } else {
                showStatus('StylyMobilePartnerLibraryが利用できません');
            }
        }

        function encodeMediaPath(path) {
            return path
                .split('/')
                .map(segment => encodeURIComponent(segment))
                .join('/');
        }

        // 音声を再生（同一ボタンクリックで停止）
        function playAudio(src, label) {
            const audio = document.getElementById('audioPlayer');
            if (!audio) {
                showStatus('音声プレイヤーが見つかりません');
                return;
            }

            const currentSrc = audio.dataset.currentSrc;
            const encodedSrc = encodeMediaPath(src);

            // 同じ音声が再生中なら停止
            if (currentSrc === src && !audio.paused && !audio.ended) {
                audio.pause();
                audio.currentTime = 0;
                showStatus(`${label} を停止しました`);
                return;
            }

            if (currentSrc !== src) {
                audio.pause();
                audio.currentTime = 0;
                audio.src = new URL(encodedSrc, window.location.href).toString();
                audio.dataset.currentSrc = src;
                audio.dataset.currentLabel = label;
            }

            audio.play()
                .then(() => {
                    showStatus(`${label} を再生します`);
                })
                .catch(() => {
                    showStatus(`${label} を再生できませんでした`);
                });
        }

        // ライブラリのロード確認
        window.addEventListener('load', () => {
            if (!window.StylyMobilePartnerLibrary) {
                alert('StylyMobilePartnerLibraryが読み込まれていません。v0.0.6.jsを配置してください。');
            }

            const audioEl = document.getElementById('audioPlayer');
            if (audioEl) {
                audioEl.addEventListener('error', () => {
                    const label = audioEl.dataset.currentLabel || '音声';
                    showStatus(`${label} を再生できませんでした`);
                });
            }
        });
    </script>
</body>

</html>
